id: 1.3
epic: 1
title: Evidence Window Builder (±2 sentences)
status: draft
story: |
  As a detection system, I need to build evidence windows around findings so that reviewers can see the context of a detected issue within the contract text.
acceptance_criteria:
  - Given a char span, return ±2 sentences (configurable per detector)
  - Respect sentence boundaries; avoid cross‑page leakage
  - Unit tests with synthetic spans
notes:
  - Use the sentence index created in Story 1.2.
  - Need to handle edge cases like spans near the beginning or end of the document.
  - Configuration for sentence window size should be considered.
tasks: []
dev_agent_record: {}

### dev_spec

- Service: `build_window(sentences, target_span, page, before=2, after=2)` returning `{ page,start,end,text,sentence_indices }`.
- Rules: clamp at document edges; do not cross page boundaries; configurable window sizes per detector.
- Dependencies: Uses sentence index generated in 1.2.

### qa_tests

- Bounds: returns ≤ before+after sentences around span; clamps at start/end.
- Cross-page: never crosses page boundary even if sentences adjacent.
- Edge spans: zero-length or near boundaries produce valid windows.
