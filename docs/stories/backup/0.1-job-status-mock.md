id: 0.1
epic: 1
title: Job Status Mock
status: Draft
story: |
  As a user, I want to see a simulated upload and job status flow entirely on the client side so that I can understand the process before the backend is fully implemented.
acceptance_criteria:
  - `/new` renders a drag-and-drop area and a file picker.
  - After selecting/dropping a file, a stepper shows: Queued -> Extracting -> Detecting -> Reporting -> Done.
  - On Done, a primary CTA appears: "View Findings" linking to `/analyses/mock-1`.
  - A secondary action allows "Start over" to reset the UI.
  - Accessibility: keyboard navigable controls; visible focus; ESC to cancel upload simulation; ARIA labels on stepper states.
  - Toggle: Unsetting `NEXT_PUBLIC_USE_MOCKS` should still render the page without errors (no API calls made in this story).

dev_notes:
  Previous Story Insights:
  - No previous story.

  Data Models:
  - No specific backend data models are used in this mock story. Mock data structures will be created in the frontend.

  API Specifications:
  - No real API endpoints are used. All states are simulated client-side. [Source: docs/architecture/6-api-contracts-mvp-frozen.md]

  Component Specifications:
  - UploadPage: Main page component for the upload flow.
  - DragAndDropArea: Component for drag-and-drop file upload.
  - Stepper: Component to display the job status steps.
  - ProgressBar: Visual indicator of progress (optional, can be part of Stepper).
  [Source: docs/architecture/front-end-architecture.md]

  File Locations:
  - apps/web/src/app/new/page.tsx (client-side upload simulation, stepper, ESC cancel)
  [Source: docs/architecture/source_tree.md]

  Testing Requirements:
  - Unit: State machine advance/cancel/reset.
  - E2E: Drop file -> progresses -> CTA routes to findings.
  - A11y: Stepper ARIA roles/states; keyboard focus; ESC cancels.
  [Source: docs/architecture/10-quality-gates-testing.md]

  Technical Constraints:
  - The demo must be gated by the `NEXT_PUBLIC_USE_MOCKS` environment variable. [Source: docs/architecture/front-end-architecture.md]
  - Code should be formatted with ESLint and Prettier. [Source: docs/architecture/coding_standards.md]
  - Components should be built with React and TypeScript using shadcn/ui and Tailwind CSS. [Source: docs/architecture/front-end-architecture.md]

tasks:
  - [ ] Frontend: Create `/new` page with drag-and-drop (or button) and a simple progress stepper component. (AC: 1, 2)
  - [ ] Frontend: Implement a timed state machine (e.g., ~0.9s per state under mocks) cycling Queued -> Extracting -> Detecting -> Reporting -> Done. (AC: 2)
  - [ ] Frontend: On Done, show "View Findings" linking to `/analyses/mock-1`, and a "Start over" reset action. (AC: 3, 4)
  - [ ] Frontend: Add ESC handler to cancel/reset simulation; ensure focus ring and ARIA labels for stepper. (AC: 5)
  - [ ] Frontend: Ensure unsetting `NEXT_PUBLIC_USE_MOCKS` still renders the page without errors. (AC: 6)

change_log:
  - 2025-08-30: Story drafted by Scrum Master (Bob).